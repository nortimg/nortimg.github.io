!function(t){function e(e){for(var o,i,r=e[0],l=e[1],u=e[2],c=0,f=[];c<r.length;c++)i=r[c],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&f.push(s[i][0]),s[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);for(d&&d(e);f.length;)f.shift()();return n.push.apply(n,u||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],o=!0,r=1;r<a.length;r++){var l=a[r];0!==s[l]&&(o=!1)}o&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var o={},s={0:0},n=[];function i(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=o,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(a,o,function(e){return t[e]}.bind(null,o));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var d=l;n.push([8,1]),a()}([function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t){}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t){this.model=t.model}render(t){}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t){this.model=t.model,this.view=t.view}render(t){}}},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(0));class n extends s.default{constructor(){super({name:"Health Panel"}),this._health=100}set health(t){this._health=t}get health(){return this._health}}e.default=n},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultListeners=e.Listeners=e.blockDestroyed=e.getCoordsOfBlock=void 0,e.getCoordsOfBlock=function(t,e){const a=e.getBoundingClientRect(),o=document.body.getBoundingClientRect(),s=o.left-a.left,n=o.top-a.top,{left:i,top:r}=t.getBoundingClientRect();return{x:i+s,y:r+n}},e.blockDestroyed=t=>new CustomEvent("blockDestroyed",{detail:{blockData:t}});class o{constructor(t){this.keyCodes={arrows:{left:37,top:38,bottom:40,right:39},space:32}}}e.Listeners=o,e.defaultListeners=new o({})},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(1)),n=o(a(3));class i extends s.default{constructor(t){super({model:n.default}),this._layout=t.layout,this.model=new n.default}get layout(){return this._layout}}e.default=i},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.LevelBlockKeys=void 0;const s=o(a(7)),n=a(33);e.default=t=>{if(t.map.length!==t.size.y)throw new Error("The level's Y axis isn't equal "+t.size.y);if(t.map[0].length!==t.size.x)throw new Error("The level's X axis isn't equal "+t.size.x);const e=[];return t.map.forEach((t,a)=>{const o=[];t.forEach((t,e)=>{const i={symbol:t,block:new s.default({...n.blocksConfig[t],theme:n.globalConfig.theme,abbr:t,position:{x:e,y:a}})};o.push(i)}),e.push(o)}),e};e.LevelBlockKeys={a:{name:"air",strength:101},t:{name:"terra",strength:3},s:{name:"stone",strength:6},w:{name:"water",strength:101},l:{name:"lava",strength:101},rb:{name:"reward-block",strength:9},r:{name:"reward",strength:0}}},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(30)),n=o(a(31)),i=o(a(32));e.default=class{constructor(t){const{strength:e,theme:a,abbr:o,block:r,position:l}=t,u=new s.default({strength:e,abbr:o,block:r,position:l}),d=new n.default({model:u,theme:a}),c=new i.default({view:d,model:u});this.model=u,this.view=d,this.controller=c}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),a(9),a(35)},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(10)),n=o(a(34)),i=a(4),r=document.querySelector("#game"),l={map:n.default,theme:"default",container:".level-container"};new s.default({gameRoot:r,level:l,listeners:i.defaultListeners,startPosition:{x:10,y:14},theme:{diggerSkin:{name:"Digger",framesQuantity:4}},startDirection:"right"}).start()},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(11)),n=o(a(18)),i=o(a(26));e.default=class{constructor(t){this.gameRoot=t.gameRoot,this.gamePanel=new s.default(t),this.level=new i.default({map:t.level.map,theme:t.level.theme,container:t.level.container}),this.digger=new n.default({level:this.level,position:{x:0,y:0},frameCounter:0,skin:{name:t.theme.diggerSkin.name,_$element:null,framesQuantity:t.theme.diggerSkin.framesQuantity},direction:t.startDirection,gameRoot:t.gameRoot}),this.startPosition=t.startPosition,this.listeners=t.listeners}start(){this.level.render(this.gameRoot),this.digger.controller.spawn({level:this.level,position:{x:this.startPosition.x,y:this.startPosition.y},direction:this.digger.model.direction,gameRoot:this.gameRoot}),this.setEventListeners(this.listeners)}setEventListeners(t){const{left:e,right:a,bottom:o,top:s}=t.keyCodes.arrows,{space:n}=t.keyCodes;window.addEventListener("keydown",t=>{const o=t.keyCode,s=o===e?"left":o===a?"right":null;s&&this.digger.controller.run(s)});let i=null;const r=document.querySelector(this.level.view.container);r.addEventListener("mousedown",t=>{if(!(t.target instanceof HTMLElement&&t.target.classList.contains("block")))return;const e=t.target;if(e.classList.contains("block-air"))return;const[a,o]=[Number(e.dataset.xAxis),Number(e.dataset.yAxis)],s=this.level.model.map[o].find(t=>t.block.model.position.x===a&&t.block.model.position.y===o).block,n=this.digger.model.position,r=s.model.position;(r.x===n.x+1&&r.y===n.y||r.x===n.x-1&&r.y===n.y||r.x===n.x&&r.y===n.y)&&s&&(i=setInterval(()=>{this.digger.model.frameCounter++,console.log("frameCounter: ",this.digger.model.frameCounter),this.digger.controller.dig(s)},300))}),r.addEventListener("mouseup",t=>{i&&clearInterval(i)}),addEventListener("blockDestroyed",t=>{const e=t.detail.blockData,{x:a,y:o}=e.position;this.level.model.map[o][a].symbol="e"})}}},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(12)),n=o(a(14));e.default=class{constructor(t){this.healthPanel=new s.default,this.budgetPanel=new n.default,this.render(t.gameRoot)}render(t){const e=`<div class="game-panel">\n                ${this.healthPanel.view.layout+this.budgetPanel.view.layout}\n            </div>`;t.insertAdjacentHTML("afterbegin",e)}}},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(3)),n=o(a(5)),i=o(a(13));e.default=class{constructor(){this.model=new s.default,this.view=new n.default({model:this.model,layout:`<div class="health-panel">\n                    <progress value="${this.model.health}" max="100" class="health-panel__value panel__value">\n                    </progress>\n                </div>`}),this.controller=new i.default(this.model,this.view)}}},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(2)),n=o(a(3)),i=o(a(5));class r extends s.default{constructor(t,e){super({model:t,view:e}),this.model=new n.default,this.view=new i.default({model:this.model,layout:this.view.layout})}get getHealth(){return this.model.health}render(t){return this.view.layout}}e.default=r},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(15)),n=o(a(16)),i=o(a(17));e.default=class{constructor(){this.model=new s.default(50),this.view=new n.default({layout:`<div class="budget-panel">\n                    <span class="budget-panel__value panel__value">${this.model.budget}</span>\n                </div>`,model:this.model}),this.controller=new i.default({model:this.model,view:this.view})}}},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(0));class n extends s.default{constructor(t){super({}),this._budget=0,this._budget=t}set budget(t){this._budget=t}get budget(){return this._budget}}e.default=n},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(1));class n extends s.default{constructor(t){super({model:t.model}),this._layout=t.layout}get layout(){return this._layout}}e.default=n},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(2));class n extends s.default{}e.default=n},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(19)),n=o(a(20)),i=o(a(22)),r=o(a(24));class l extends s.default{constructor(t){const e=new n.default({level:t.level,speed:5,position:t.position,name:t.skin.name,condition:"runs",frameCounter:t.frameCounter,direction:t.direction}),a=new i.default({model:e,skin:t.skin,gameRoot:t.gameRoot,levelContainer:t.level.view.container}),o=new r.default({model:e,view:a});super(e,a,o),this.model=e,this.view=a,this.controller=o}}e.default=l},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,a){this.model=t,this.view=e,this.controller=a}spawn(){this.controller.spawn({level:this.model.level,position:this.model.position,direction:this.model.direction,gameRoot:this.view.gameRoot})}}},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(21));class n extends s.default{constructor(t){super({speed:t.speed,position:t.position,name:t.name,level:t.level,condition:t.condition,frameCounter:t.frameCounter,direction:t.direction})}}e.default=n},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(0));class n extends s.default{constructor(t){super({name:"Character"}),this.speed=t.speed,this.position=t.position,this.name=t.name,this.level=t.level,this.condition=t.condition,this.frameCounter=t.frameCounter,this.direction=t.direction}}e.default=n},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(23));class n extends s.default{constructor(t){super({skin:{name:t.model.name,_$element:t.skin._$element,framesQuantity:t.skin.framesQuantity},model:t.model,gameRoot:t.gameRoot,levelContainer:t.levelContainer})}}e.default=n},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(1)),n=a(4);class i extends s.default{constructor(t){super({model:t.model}),this.skin=t.skin,this.model=t.model,this.gameRoot=t.gameRoot,this.levelContainer=t.levelContainer}render(t){this.model.direction=t.direction;let{x:e,y:a}=t.position;const o=document.querySelector(`[data-x-axis="${e}"][data-y-axis="${a}"]`),s=document.querySelector(this.levelContainer);e=n.getCoordsOfBlock(o,s).x,a=n.getCoordsOfBlock(o,s).y;const{name:i,condition:r}=this.model;console.log("condition: ",r);const l=document.createElement("img");l.src=`./assets/img/Characters/${i}/${this.skin.name}_${r}.png`,l.classList.add("frame","frame-"+t.frameCounter);const u=document.createElement("div");u.classList.add("character","character-"+this.model.name,"direction-"+t.direction,"character_"+r),u.appendChild(l),document.body.appendChild(u),u.style.left=e+"px",u.style.top=a+"px",this.skin._$element=u,s.insertAdjacentElement("beforeend",u)}erase(){return this.skin._$element.remove(),this.skin._$element}}e.default=i},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(25));class n extends s.default{constructor(t){super({model:t.model,view:t.view})}dig(t){const e=100/t.model.strength;t.controller.hurtSelf(e),this.model.condition="digs",this.model.frameCounter>4&&(this.model.frameCounter=0),this.view.erase(),this.view.render({position:this.model.position,frameCounter:this.model.frameCounter,direction:this.model.direction})}}e.default=n},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(2));class n extends s.default{constructor(t){super(t),this.view=t.view,this.model=t.model}spawn(t){return this.model.position=t.position,this.model.condition="runs",this.view.render({position:t.position,frameCounter:0,direction:t.direction})}run(t){switch(this.view.erase(),this.model.frameCounter>=this.view.skin.framesQuantity&&(this.model.frameCounter=0),this.model.frameCounter++,t){case"left":this.model.position.x--;break;case"right":this.model.position.x++}this.view.skin._$element.setAttribute("data-x-character-axis",this.model.position.x.toString()),this.view.skin._$element.setAttribute("data-y-character-axis",this.model.position.y.toString()),this.model.condition="runs",this.view.render({position:this.model.position,frameCounter:this.model.frameCounter,direction:t})}isEmpty({x:t,y:e}){return"e"===this.model.level.model.map[e][t].symbol}attack(){}}e.default=n},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(27)),n=o(a(28)),i=o(a(29));e.default=class{constructor(t){this.model=new s.default({map:t.map}),this.view=new n.default({model:this.model,theme:t.theme,container:t.container}),this.controller=new i.default({model:this.model,view:this.view})}render(t){return this.controller.render({gameRoot:t,map:this.model.map,theme:this.view.theme})}}},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(0));class n extends s.default{constructor(t){super({}),this.map=t.map}}e.default=n},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(1));class n extends s.default{constructor(t){super(t),this.theme=t.theme,this.container=t.container}}e.default=n},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(2)),n=a(6),i=o(a(7));class r extends s.default{constructor(t){super(t),this.model=t.model,this.view=t.view}render(t){const e=document.createElement("div");return e.classList.add("level-container"),t.map.forEach((a,o)=>{const s=e.appendChild(document.createElement("div"));s.setAttribute("data-row-counter",o.toString()),a.forEach(({symbol:e},a)=>{const r=new i.default({strength:n.LevelBlockKeys[e].strength,theme:t.theme,abbr:e,block:n.LevelBlockKeys[e].name,position:{x:o,y:a}});this.model,s.insertAdjacentHTML("beforeend",r.view.$template)})}),t.gameRoot.appendChild(e)}}e.default=r},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(0));class n extends s.default{constructor(t){super(t),this.state={health:100},this.strength=t.strength,this.abbr=t.abbr,this.block=t.block,this.position=t.position}}e.default=n},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(1));class n extends s.default{constructor(t){super(t),this.model=t.model;const{theme:e}=t,{x:a,y:o}=this.model.position,s=this.model.block,n=this.model.abbr;this.$template=`<img \n                alt="${n}"\n                title="${s}"\n                data-y-axis="${a}" \n                data-x-axis="${o}"\n                src="./assets/img/themes/${e}/${s}.png"\n                class="block block-${s}"\n            >`}}e.default=n},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(2)),n=a(4);class i extends s.default{constructor(t){super(t),this.model=t.model,this.view=t.view}hurtSelf(t){this.model.state.health-=t,this.model.state.health<=0&&(this.model.state.health=0,this.destroy())}destroy(){const{x:t,y:e}=this.model.position,a=document.querySelector(`[data-x-axis="${t}"][data-y-axis="${e}"]`);this.model.abbr="a",a.classList.remove("block-"+this.model.block),a.src="data:,",this.model.block="empty",a.classList.add("block-"+this.model.block),dispatchEvent(n.blockDestroyed(this.model))}}e.default=i},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalConfig=e.blocksConfig=void 0,e.blocksConfig={t:{strength:3,block:"terra"}},e.globalConfig={theme:"default"}},function(t,e,a){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=o(a(6)).default({size:{x:30,y:20},map:[["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a"],["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a"],["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a"],["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a"],["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a"],["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a"],["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a"],["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a"],["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a"],["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a"],["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a"],["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a"],["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a"],["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a"],["t","t","t","t","t","t","t","t","t","t","t","r","t","rb","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t"],["t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","rb","t","rb","t","t","t","rb","t","t","t","t","t","t","t","t"],["t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t"],["t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","rb","t","t","t","t","t","t","t","t"],["t","t","t","t","t","t","t","t","t","t","t","t","t","rb","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t"],["t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t","t"]]});e.default=s},function(t,e,a){var o=a(36),s=a(37);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[t.i,s,""]]);var n={insert:"head",singleton:!1};o(s,n);t.exports=s.locals||{}},,function(t,e,a){}]);